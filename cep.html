<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API REST</title>
</head>

<body>
    <form id="my-form">
        <label for="cep-input">CEP </label>
        <input id="cep-input" autocomplete="off" maxlength="8" style="width: 70px;">
        <br></br>
        <label for="estado">ESTADO: </label>
        <input type="text" id="estado">
        <br></br>

        <label for="cidade">CIDADE: </label>
        <input type="text" id="cidade">
        <br></br>

        <label for="bairro">BAIRRO: </label>
        <input type="text" id="bairro">
        <br></br>

        <label for="rua">RUA: </label>
        <input type="text" id="rua">
        <br>
        <br>

        <button type="reset" id="btn-limpar">Limpar</button>

    </form>


    <script>
        document.querySelector('#cep-input').addEventListener('input', function () {
            const cep = this.value.replace(/\D/g, '');
            const cepInput = document.querySelector('#cep-input')
            const estado = document.querySelector('#estado')
            const cidade = document.querySelector('#cidade')
            const bairro = document.querySelector('#bairro')
            const rua = document.querySelector('#rua')
            if (cep.length === 8) {
                fetch(`https://brasilapi.com.br/api/cep/v2/${cep}`)
                    .then(response => response.json())
                    .then(data => {
                        console.log(data)
                        estado.value += data.state
                        cidade.value += data.city
                        bairro.value += data.neighborhood
                        rua.value += data.street
                    })
                    .catch(error => {
                        estado.value = 'Não encontrado';
                        cidade.value = 'Não encontrado';
                        bairro.value = 'Não encontrado';
                        console.error('Erro ao buscar o CEP:', error);
                    });

            } else {
                estado.value = '';
                cidade.value = '';
                bairro.value = '';
                rua.value = '';
            }

        })



    </script>
</body>

</html>